(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{54:function(e,t,c){},59:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(15),r=c.n(s),a=c(44),i="rgb(0, 0, 0)",l=Object(a.a)({palette:{primary:{main:i},secondary:{main:i}},typography:{fontFamily:"Jura"},shape:{borderRadius:20},overrides:{MuiButton:{root:{fontWeight:"bold",fontSize:"17px","&:focus":{outline:"none"}}}}}),u=(c(54),c(78)),o=c(79),j=c(8),b=c(77),O=c(76),f=c(1),d=function(){return Object(f.jsx)("svg",{className:"circle",children:Object(f.jsx)("circle",{r:"20",cx:"24",cy:"24",stroke:"#009688",strokeWidth:"5",fill:"none",strokeLinecap:"round"})})},m=function(){return Object(f.jsxs)("svg",{className:"cross",children:[Object(f.jsx)("line",{className:"first",x1:"5",y1:"5",x2:"40",y2:"40",stroke:"#606060",strokeWidth:"5",strokeLinecap:"round"}),Object(f.jsx)("line",{className:"second",x1:"40",y1:"5",x2:"5",y2:"40",stroke:"#606060",strokeWidth:"5",strokeLinecap:"round"})]})},x=function(e){var t=e.value,c=e.isWinner,n=e.setActive;return Object(f.jsxs)("button",{className:"square ".concat(c?"square--winner":""),onClick:n,children:["O"===t&&Object(f.jsx)(d,{}),"X"===t&&Object(f.jsx)(m,{})]})},h=function(){return Array(9).fill(null)},g=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],c=0;c<t.length;c++){var n=Object(j.a)(t[c],3),s=n[0],r=n[1],a=n[2];if(e[s]&&e[s]===e[r]&&e[s]===e[a])return{winner:e[s],idxs:[s,r,a]}}return null},v=function(e,t,c){if(!t){var n="https://timra.ru/portfolio/audio/".concat(e,".mp3"),s=new Audio(n);s.volume=.1,setTimeout((function(){s.play()}),c||0)}},p="Start the game",N="Next: ",k={WINNER:"Winner: ",TIE:"TIE"},S=function(e){var t=e.squares,c=e.xIsNext,s=e.isMute,r=e.winner,a=e.isTie,i=Object(n.useState)(p),l=Object(j.a)(i,2),u=l[0],o=l[1];return Object(n.useEffect)((function(){var e=!!t.filter((function(e){return e})).length;o(e?"".concat(N," ").concat(c?"X":"0"):p)}),[t,c]),Object(n.useEffect)((function(){r?(o(k.WINNER),v("win",s,1500)):a&&(o(k.TIE),v("tie",s,2e3))}),[r,a]),Object(f.jsxs)("div",{className:"status ".concat(r||a?"status--win":""," ").concat(c||u===p?"status--nextX":""),children:[u," ",r]})},y="react-game/squares",E=function(e){var t=e.isMute,c=Object(n.useState)(h),s=Object(j.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(!0),l=Object(j.a)(i,2),u=l[0],o=l[1],b=Object(n.useState)(null),d=Object(j.a)(b,2),m=d[0],p=d[1],N=Object(n.useState)(!1),k=Object(j.a)(N,2),E=k[0],F=k[1];Object(n.useEffect)((function(){var e=localStorage.getItem(y);e&&a(JSON.parse(e||""))}),[]),Object(n.useEffect)((function(){var e,t=(null===(e=g(r))||void 0===e?void 0:e.winner)||null;p(t||null);var c=!(9!==r.filter((function(e){return e})).length);F(c)}),[r]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(S,{squares:r,xIsNext:u,isMute:t,winner:m,isTie:E}),Object(f.jsx)("div",{className:"board ".concat(m||E?"board--disabled":""),children:r.map((function(e,c){var n;return Object(f.jsx)(x,{value:e,isWinner:(null===(n=g(r))||void 0===n?void 0:n.idxs.includes(c))||null,setActive:function(){return function(e){var c=r.slice();g(c)||r[e]||(c[e]=u?"X":"O",localStorage.setItem(y,JSON.stringify(c)),a(c),o(!u),v(u?"cross":"zero",t))}(c)}},c)}))}),(m||E)&&Object(f.jsx)(O.a,{className:"btn-new-game",variant:"contained",onClick:function(){a(h),p(null),F(!1),o(!0),localStorage.removeItem(y)},children:"new game"})]})},F=c(37),I=c.n(F),w=function(e){var t=e.innerRef,c=e.isMute,n=e.handleFullscreenExitClick;return Object(f.jsxs)("div",{className:"game",ref:t,children:[Object(f.jsx)(b.a,{className:"FullscreenExitIcon",onClick:n,children:Object(f.jsx)(I.a,{})}),Object(f.jsxs)("div",{className:"game--board",children:[Object(f.jsx)("h1",{className:"game--title",children:"Tic-Tac-Toe"}),Object(f.jsx)(E,{isMute:c})]})]})},M=c.p+"static/media/rs_school_js.ad178c0d.svg",C=function(){return Object(f.jsxs)("a",{href:"/",className:"logo",children:[Object(f.jsx)("img",{src:M,alt:"",className:"logo__img"}),Object(f.jsx)("span",{className:"logo__text",children:Object(f.jsx)("span",{className:"logo__title",children:"React game"})})]})},_=c(40),q=c.n(_),R=c(41),T=c.n(R),W=c(42),J=c.n(W),B=c(39),A=c.n(B),X=c(38),L=c.n(X),z="react-game/playMusic",V=function(){var e=Object(n.useState)(!0),t=Object(j.a)(e,2),c=t[0],s=t[1],r=Object(n.useRef)(null);Object(n.useEffect)((function(){r.current&&(c?(r.current.defaultMuted=!1,r.current.muted=!1):(r.current.defaultMuted=!0,r.current.muted=!0))}),[c]),Object(n.useEffect)((function(){var e=localStorage.getItem(z);e&&s(JSON.parse(e||""))}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(b.a,{onClick:function(){s(!c),localStorage.setItem(z,JSON.stringify(!c))},children:c?Object(f.jsx)(L.a,{}):Object(f.jsx)(A.a,{})}),c&&Object(f.jsx)("audio",{autoPlay:!0,loop:!0,ref:r,src:"https://timra.ru/portfolio/audio/music.mp3"})]})},P=function(e){var t=e.onBtnFullScreenClick,c=e.onBtnVolumeMuteClick,n=e.isMute;return Object(f.jsxs)("header",{children:[Object(f.jsx)(C,{}),Object(f.jsx)(b.a,{onClick:t,children:Object(f.jsx)(q.a,{})}),Object(f.jsx)(V,{}),Object(f.jsx)(b.a,{onClick:c,children:n?Object(f.jsx)(J.a,{}):Object(f.jsx)(T.a,{})})]})},D=c(43),G=c.n(D),H=function(){return Object(f.jsxs)("footer",{children:[Object(f.jsx)(b.a,{color:"primary",href:"https://github.com/TimraWork",target:"_blank",children:Object(f.jsx)(G.a,{})}),Object(f.jsx)("div",{className:"copyright",children:"\xa9 2021"}),Object(f.jsx)("a",{href:"https://rs.school/react/",className:"footer-logo",target:"_blank",children:Object(f.jsx)("img",{src:M,alt:"",className:"footer-logo__img"})})]})},K="react-game/mute",Q=function(){var e=Object(n.useState)(null),t=Object(j.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),a=Object(j.a)(r,2),i=a[0],l=a[1];Object(n.useEffect)((function(){var e=localStorage.getItem(K);e&&l(JSON.parse(e||""))}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(P,{isMute:i,onBtnFullScreenClick:function(){var e=c;e&&e.requestFullscreen&&e.requestFullscreen(),e&&e.webkitRequestFullScreen&&e.webkitRequestFullScreen(),e&&e.msRequestFullscreen&&e.msRequestFullscreen()},onBtnVolumeMuteClick:function(){i&&v("mute",i),l(!i),localStorage.setItem(K,JSON.stringify(!i))}}),Object(f.jsx)(w,{isMute:i,innerRef:function(e){s(e)},handleFullscreenExitClick:function(){document.fullscreenElement&&document.exitFullscreen()}}),Object(f.jsx)(H,{})]})};r.a.render(Object(f.jsxs)(u.a,{theme:l,children:[Object(f.jsx)(o.a,{}),Object(f.jsx)(Q,{})]}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.772fe742.chunk.js.map