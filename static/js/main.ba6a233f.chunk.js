(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{55:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c(15),r=c.n(s),a=c(45),i="rgb(0, 0, 0)",l="rgb(0, 150, 136)",u=Object(a.a)({palette:{primary:{main:i},secondary:{main:l}},typography:{fontFamily:"Jura"},shape:{borderRadius:20},overrides:{MuiButton:{root:{fontWeight:"bold",fontSize:"17px","&:focus":{outline:"none"}}}}}),o=(c(55),c(79)),j=c(80),b=c(8),O=c(78),f=c(77),m=c(1),d=function(){return Object(m.jsx)("svg",{className:"circle",children:Object(m.jsx)("circle",{r:"20",cx:"24",cy:"24",stroke:"#009688",strokeWidth:"5",fill:"none",strokeLinecap:"round"})})},x=function(){return Object(m.jsxs)("svg",{className:"cross",children:[Object(m.jsx)("line",{className:"first",x1:"5",y1:"5",x2:"40",y2:"40",stroke:"#606060",strokeWidth:"5",strokeLinecap:"round"}),Object(m.jsx)("line",{className:"second",x1:"40",y1:"5",x2:"5",y2:"40",stroke:"#606060",strokeWidth:"5",strokeLinecap:"round"})]})},h=function(e){var t=e.value,c=e.isWinner,n=e.setActive;return Object(m.jsxs)("button",{className:"square ".concat(c?"square--winner":""),onClick:n,children:["O"===t&&Object(m.jsx)(d,{}),"X"===t&&Object(m.jsx)(x,{})]})},g=function(){return Array(9).fill(null)},v=function(e){for(var t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],c=0;c<t.length;c++){var n=Object(b.a)(t[c],3),s=n[0],r=n[1],a=n[2];if(e[s]&&e[s]===e[r]&&e[s]===e[a])return{winner:e[s],idxs:[s,r,a]}}return null},p=function(e,t,c){if(!t){var n="https://timra.ru/portfolio/audio/".concat(e,".mp3"),s=new Audio(n);s.volume=.1,setTimeout((function(){s.play()}),c)}},N="Start the game",k="Next: ",S={WINNER:"Winner: ",TIE:"TIE"},y=function(e){var t=e.squares,c=e.xIsNext,s=e.isMute,r=e.winner,a=e.isTie,i=Object(n.useState)(N),l=Object(b.a)(i,2),u=l[0],o=l[1];return Object(n.useEffect)((function(){var e=!!t.filter((function(e){return e})).length;o(e?"".concat(k," ").concat(c?"X":"0"):N)}),[t,c]),Object(n.useEffect)((function(){r?(o(S.WINNER),p("win",s,1500)):a&&(o(S.TIE),p("tie",s,2e3))}),[r,a]),Object(m.jsxs)("div",{className:"status ".concat(r||a?"status--win":""," ").concat(c||u===N?"status--nextX":""),children:[u," ",r]})},E="react-game/squares",F=function(e){var t=e.isMute,c=Object(n.useState)(g),s=Object(b.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(!0),l=Object(b.a)(i,2),u=l[0],o=l[1],j=Object(n.useState)(null),O=Object(b.a)(j,2),d=O[0],x=O[1],N=Object(n.useState)(!1),k=Object(b.a)(N,2),S=k[0],F=k[1];Object(n.useEffect)((function(){var e=localStorage.getItem(E);e&&a(JSON.parse(e||""))}),[]),Object(n.useEffect)((function(){var e,t=(null===(e=v(r))||void 0===e?void 0:e.winner)||null;x(t||null);var c=!(9!==r.filter((function(e){return e})).length);F(c)}),[r]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(y,{squares:r,xIsNext:u,isMute:t,winner:d,isTie:S}),Object(m.jsx)("div",{className:"board ".concat(d||S?"board--disabled":""),children:r.map((function(e,c){var n;return Object(m.jsx)(h,{value:e,isWinner:(null===(n=v(r))||void 0===n?void 0:n.idxs.includes(c))||null,setActive:function(){return function(e){var c=r.slice();v(c)||r[e]||(c[e]=u?"X":"O",localStorage.setItem(E,JSON.stringify(c)),a(c),o(!u),p(u?"cross":"zero",t))}(c)}},c)}))}),(d||S)&&Object(m.jsx)(f.a,{className:"btn-new-game",variant:"contained",onClick:function(){a(g),x(null),F(!1),o(!0),localStorage.removeItem(E)},children:"new game"})]})},I=c(37),w=c.n(I),M=function(e){var t=e.innerRef,c=e.isMute,n=e.handleFullscreenExitClick;return Object(m.jsxs)("div",{className:"game",ref:t,children:[Object(m.jsx)(O.a,{className:"FullscreenExitIcon",onClick:n,children:Object(m.jsx)(w.a,{})}),Object(m.jsxs)("div",{className:"game--board",children:[Object(m.jsx)("h1",{className:"game--title",children:"Tic-Tac-Toe"}),Object(m.jsx)(F,{isMute:c})]})]})},_=c.p+"static/media/rs_school_js.ad178c0d.svg",C=function(){return Object(m.jsxs)("a",{href:"/",className:"logo",children:[Object(m.jsx)("img",{src:_,alt:"",className:"logo__img"}),Object(m.jsx)("span",{className:"logo__text",children:Object(m.jsx)("span",{className:"logo__title",children:"React game"})})]})},q=c(40),R=c.n(q),T=c(41),W=c.n(T),J=c(42),B=c.n(J),A=c(39),X=c.n(A),L=c(38),z=c.n(L),V="react-game/playMusic",P=function(){var e=Object(n.useState)(!0),t=Object(b.a)(e,2),c=t[0],s=t[1],r=Object(n.useRef)(null);Object(n.useEffect)((function(){r.current&&(c?(r.current.defaultMuted=!1,r.current.muted=!1):(r.current.defaultMuted=!0,r.current.muted=!0))}),[c]),Object(n.useEffect)((function(){var e=localStorage.getItem(V);e&&s(JSON.parse(e||""))}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(O.a,{onClick:function(){s(!c),localStorage.setItem(V,JSON.stringify(!c))},children:c?Object(m.jsx)(z.a,{}):Object(m.jsx)(X.a,{})}),c&&Object(m.jsx)("audio",{autoPlay:!0,loop:!0,ref:r,src:"https://timra.ru/portfolio/audio/music.mp3"})]})},D=function(e){var t=e.onBtnFullScreenClick,c=e.onBtnVolumeMuteClick,n=e.isMute;return Object(m.jsxs)("header",{children:[Object(m.jsx)(C,{}),Object(m.jsx)(O.a,{onClick:t,children:Object(m.jsx)(R.a,{})}),Object(m.jsx)(P,{}),Object(m.jsx)(O.a,{onClick:c,children:n?Object(m.jsx)(B.a,{}):Object(m.jsx)(W.a,{})})]})},G=c(43),H=c.n(G),K=c(44),Q=c.n(K),U=function(){return Object(m.jsxs)("footer",{children:[Object(m.jsx)(O.a,{href:"https://github.com/TimraWork",target:"_blank",children:Object(m.jsx)(H.a,{})}),Object(m.jsx)(O.a,{href:"https://telegram.me/timra_work",target:"_blank",children:Object(m.jsx)(Q.a,{})}),Object(m.jsx)("div",{className:"copyright",children:"\xa9 2021"}),Object(m.jsx)("a",{href:"https://rs.school/react/",className:"footer-logo",target:"_blank",children:Object(m.jsx)("img",{src:_,alt:"",className:"footer-logo__img"})})]})},Y="react-game/mute",Z=function(){var e=Object(n.useState)(null),t=Object(b.a)(e,2),c=t[0],s=t[1],r=Object(n.useState)(!1),a=Object(b.a)(r,2),i=a[0],l=a[1];Object(n.useEffect)((function(){var e=localStorage.getItem(Y);e&&l(JSON.parse(e||""))}),[]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(D,{isMute:i,onBtnFullScreenClick:function(){var e=c;e&&e.requestFullscreen&&e.requestFullscreen(),e&&e.webkitRequestFullScreen&&e.webkitRequestFullScreen(),e&&e.msRequestFullscreen&&e.msRequestFullscreen()},onBtnVolumeMuteClick:function(){l(!i),localStorage.setItem(Y,JSON.stringify(!i)),p("mute",!i)}}),Object(m.jsx)(M,{isMute:i,innerRef:function(e){s(e)},handleFullscreenExitClick:function(){document.fullscreenElement&&document.exitFullscreen()}}),Object(m.jsx)(U,{})]})};r.a.render(Object(m.jsxs)(o.a,{theme:u,children:[Object(m.jsx)(j.a,{}),Object(m.jsx)(Z,{})]}),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.ba6a233f.chunk.js.map